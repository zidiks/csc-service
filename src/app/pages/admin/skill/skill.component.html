<div class="skill" *ngIf="loadingStatus$; else loading">
  <form [formGroup]="skillForm">
    <mat-form-field class="custom-input">
      <input formControlName="name" matInput>
      <mat-placeholder class="placeholder">Название</mat-placeholder>
    </mat-form-field>
    <div style="margin-top: 1rem">
      <div class="skills__parts-header">
        <h2>Разделы</h2>
        <ion-icon matTooltip="добавить" (click)="addPart('Новый раздел')" matTooltipPosition="above" class="edit-icon" name="add-circle"></ion-icon>
      </div>
      <div *ngFor="let part of parts$ | async; let i = index">
        <div class="skills__part-header">
          <ion-icon matTooltip="удалить" (click)="removePart(i)" matTooltipPosition="above" class="edit-icon" name="remove-circle"></ion-icon>
          <input class="skills__parts-editable-name" [value]="part.name" (keypress)="renamePart($event, i)" (change)="renamePart($event, i)">
        </div>
        <div class="mat-chips">
          <mat-chip-list aria-label="Fish selection">
            <mat-chip class="mat-chip active"
                      *ngFor="let option of part.options"
            >
              {{ option }}
              <mat-icon class="remove-chip" (click)="removeSkill(option, i)">highlight_off</mat-icon>
            </mat-chip>
            <mat-chip class="mat-chip add" (click)="addSkill(i)">
              Добавить
              <mat-icon class="remove-chip">add_circle_outline</mat-icon>
            </mat-chip>
          </mat-chip-list>
        </div>
      </div>
    </div>
    <button
      style="margin-top: 0.7rem"
      mat-button
      (click)="saveAllChanges()"
    >
      Сохранить
    </button>
  </form>
</div>
<ng-template #loading>
  <div class="skills__loading">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
